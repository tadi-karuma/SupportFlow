# 🔧 構造と原理（技術補完）

## 1. 全体構造（抽象モデル）

```
[ユーザー]
   ↓ 質問回答（選択式UI）
[質問モジュール（Q-Engine）]
   ↓ 条件マッチ
[制度判定ロジック]
   ↓ 結果表示（制度候補＋必要書類＋予約可）
[自治体連携API / 書類発行システム]
```

- UIはスマホ・窓口端末両対応。
- 制度DBは「国」「地方」の2階層に分け、最終的には自治体側でマージ。
- 質問項目は制度ロジックにマッピングされ、改正時も部分的に差し替え可能。

## 2. マイナンバー連携と情報取得構造

- マイナポータルの外部連携APIを活用し、次の情報を取得（要同意）：
  - 年齢、世帯構成、住民税区分、障害者手帳保有、介護認定
- カードリーダー/NFCスマホで電子証明書認証（JPKI）

## 3. 制度情報の整備と更新

- 国：XML or JSONでAPI提供（マイナポータル系と連携）
- 地方：制度DBをJSON-LD形式で整備。更新責任は自治体に持たせる。
- 各制度ごとに「質問セットID」と「必要書類テンプレート」を付与。
